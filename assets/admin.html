<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù†Ø§Øª</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
        body { background: #f5f5f5; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        header { background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 20px; border-radius: 10px; text-align: center; }
        .stat-card h3 { color: #333; margin-bottom: 10px; }
        .stat-card .number { font-size: 36px; font-weight: bold; }
        .stat-card.pending { border-top: 4px solid #f59e0b; }
        .stat-card.approved { border-top: 4px solid #10b981; }
        .stat-card.rejected { border-top: 4px solid #ef4444; }
        .surveys-list { background: white; padding: 20px; border-radius: 10px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px; text-align: right; border-bottom: 1px solid #eee; }
        th { background: #f8f9fa; }
        .status { padding: 5px 10px; border-radius: 20px; font-size: 12px; }
        .status-pending { background: #fef3c7; color: #92400e; }
        .status-approved { background: #d1fae5; color: #065f46; }
        .status-rejected { background: #fee2e2; color: #991b1b; }
        .actions button { padding: 5px 10px; margin: 0 3px; border: none; border-radius: 5px; cursor: pointer; }
        .approve-btn { background: #10b981; color: white; }
        .reject-btn { background: #ef4444; color: white; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“Š Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù†Ø§Øª</h1>
            <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù†Ø§Øª</p>
        </header>
        
        <div class="stats">
            <div class="stat-card">
                <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†</h3>
                <div class="number" id="total">0</div>
            </div>
            <div class="stat-card pending">
                <h3>Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</h3>
                <div class="number" id="pending">0</div>
            </div>
            <div class="stat-card approved">
                <h3>Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„Ø©</h3>
                <div class="number" id="approved">0</div>
            </div>
            <div class="stat-card">
                <h3>Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©</h3>
                <div class="number" id="remaining">150</div>
            </div>
        </div>
        
        <div class="surveys-list">
            <h2>ğŸ“‹ Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</h2>
            <table id="surveysTable">
                <thead>
                    <tr>
                        <th>Ø±Ù‚Ù… Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©</th>
                        <th>Ø§Ù„Ø§Ø³Ù…</th>
                        <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                        <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                        <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                    </tr>
                </thead>
                <tbody id="surveysBody">
                    <!-- ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‡Ù†Ø§ -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage
        function loadSurveys() {
            const surveys = JSON.parse(localStorage.getItem('participants') || '[]');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            document.getElementById('total').textContent = surveys.length;
            
            const pending = surveys.filter(s => s.status === 'pending').length;
            const approved = surveys.filter(s => s.status === 'approved').length;
            
            document.getElementById('pending').textContent = pending;
            document.getElementById('approved').textContent = approved;
            document.getElementById('remaining').textContent = 150 - approved;
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯ÙˆÙ„
            const tbody = document.getElementById('surveysBody');
            tbody.innerHTML = '';
            
            const pendingSurveys = surveys.filter(s => s.status === 'pending');
            
            pendingSurveys.forEach(survey => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${survey.id}</td>
                    <td>${survey.name}</td>
                    <td>${survey.phone}</td>
                    <td>${survey.date}</td>
                    <td><span class="status status-pending">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</span></td>
                    <td class="actions">
                        <button class="approve-btn" onclick="approveSurvey('${survey.id}')">âœ… Ù‚Ø¨ÙˆÙ„</button>
                        <button class="reject-btn" onclick="rejectSurvey('${survey.id}')">âŒ Ø±ÙØ¶</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }
        
        // Ù‚Ø¨ÙˆÙ„ Ø§Ø³ØªØ¨ÙŠØ§Ù†
        function approveSurvey(id) {
            const surveys = JSON.parse(localStorage.getItem('participants') || '[]');
            const index = surveys.findIndex(s => s.id === id);
            
            if (index !== -1) {
                surveys[index].status = 'approved';
                surveys[index].reviewed_at = new Date().toLocaleString('ar-SA');
                localStorage.setItem('participants', JSON.stringify(surveys));
                
                alert(`âœ… ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ${id}`);
                loadSurveys();
            }
        }
        
        // Ø±ÙØ¶ Ø§Ø³ØªØ¨ÙŠØ§Ù†
        function rejectSurvey(id) {
            const surveys = JSON.parse(localStorage.getItem('participants') || '[]');
            const index = surveys.findIndex(s => s.id === id);
            
            if (index !== -1) {
                surveys[index].status = 'rejected';
                surveys[index].reviewed_at = new Date().toLocaleString('ar-SA');
                localStorage.setItem('participants', JSON.stringify(surveys));
                
                alert(`âŒ ØªÙ… Ø±ÙØ¶ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ${id}`);
                loadSurveys();
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ 5 Ø«ÙˆØ§Ù†ÙŠ
        setInterval(loadSurveys, 5000);
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø¡
        document.addEventListener('DOMContentLoaded', loadSurveys);
    </script>
</body>
</html>